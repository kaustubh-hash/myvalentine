<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Valentine</title>

<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box;margin:0;padding:0}

body{
  height:100vh;
  font-family:'Press Start 2P',cursive;
  overflow:hidden;
  display:flex;
  justify-content:center;
  align-items:flex-start;
  padding-top:80px;
}

/* Animated PNG Background */
.bg,
.palmSway,
.cloudDrift{
  position:fixed;
  inset:0;
  background:url("background.png") center/cover no-repeat;
}

.bg{ z-index:-3; }

.bg::after{
  content:"";
  position:absolute;
  inset:0;
  background:linear-gradient(
    120deg,
    rgba(255,255,255,0.05) 0%,
    rgba(255,255,255,0.15) 50%,
    rgba(255,255,255,0.05) 100%
  );
  mix-blend-mode:overlay;
  animation:waterMove 6s linear infinite;
}

@keyframes waterMove{
  from{transform:translateX(-100%)}
  to{transform:translateX(100%)}
}

.palmSway{
  z-index:-2;
  animation:sway 8s ease-in-out infinite;
  opacity:.12;
}

@keyframes sway{
  0%,100%{transform:translateX(0px)}
  50%{transform:translateX(6px)}
}

.cloudDrift{
  z-index:-1;
  animation:cloudMove 40s linear infinite;
  opacity:.08;
}

@keyframes cloudMove{
  from{transform:translateX(0)}
  to{transform:translateX(-120px)}
}

#confettiCanvas{
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:1000;
}

.dialog{
  width:420px;
  padding:22px;
  text-align:center;
  position:relative;
  background:#fff3d6;
  border:8px solid #0b3c5d;
  box-shadow:
    0 0 0 6px #08304b,
    16px 16px 0 #06263a;
  transition:all .4s ease;
  z-index:10;
}

h1{
  font-size:14px;
  line-height:1.6;
  margin-bottom:18px;
  color:#0b3c88;
}

.zone{
  position:relative;
  height:90px;
}

button{
  padding:10px 14px;
  font-size:11px;
  border:4px solid #06263a;
  cursor:pointer;
  font-family:'Press Start 2P',cursive;
  box-shadow:4px 4px 0 #06263a;
  position:absolute;
}

#yesBtn{ left:30%; background:#e36414; color:#fff; }
#noBtn{ left:55%; background:#9ad1d4; color:#06263a; }

.fineprint{ margin-top:18px; font-size:9px; color:#06263a; opacity:.85; }

.result{
  display:none;
  margin-top:16px;
  font-size:11px;
  line-height:1.7;
  color:#ffffff;
  text-shadow:2px 2px 0 #06263a;
}

.party{ animation: medShift .7s infinite; }

@keyframes medShift{
  0%{background:#e9c46a}
  25%{background:#2a9d8f}
  50%{background:#f4a261}
  75%{background:#264653}
  100%{background:#e76f51}
}
</style>
</head>

<body>

<div class="bg"></div>
<div class="palmSway"></div>
<div class="cloudDrift"></div>

<audio id="bgMusic" loop>
  <source src="p2p.mp3" type="audio/mp3">
</audio>

<canvas id="confettiCanvas"></canvas>

<div class="dialog" id="dialog">
  <h1 id="question">Harshita, will you be my valentine?</h1>
  <div class="zone" id="zone">
    <button id="yesBtn">YES</button>
    <button id="noBtn">No*</button>
  </div>
  <div class="fineprint" id="fineprint">*always the right answers(?)</div>
  <div class="result" id="result">
    A smart lady always exercises her free will, indeed. :p<br/><br/>
    I love you, doll!
  </div>
</div>

<script>
const bgMusic=document.getElementById("bgMusic");
function unlockAudio(){
  bgMusic.play().catch(()=>{});
  window.removeEventListener("click",unlockAudio);
}
window.addEventListener("click",unlockAudio);

const canvas=document.getElementById("confettiCanvas");
const confettiInstance=confetti.create(canvas,{resize:true,useWorker:true});

function fireConfetti(){
  const end=Date.now()+4000;
  (function frame(){
    confettiInstance({
      particleCount:60,
      spread:360,
      startVelocity:70,
      origin:{x:0.5,y:0.5}
    });
    if(Date.now()<end)requestAnimationFrame(frame);
  })();
}

const zone=document.getElementById("zone");
const yesBtn=document.getElementById("yesBtn");
const noBtn=document.getElementById("noBtn");
const result=document.getElementById("result");
const dialog=document.getElementById("dialog");
const question=document.getElementById("question");
const fineprint=document.getElementById("fineprint");

let scale=1;
yesBtn.addEventListener("mouseenter",()=>{
  scale*=1.2;
  yesBtn.style.left="50%";
  yesBtn.style.position="fixed";
  yesBtn.style.transform=`translate(-50%,-50%) scale(${scale})`;
  yesBtn.style.zIndex="2000";
});

zone.addEventListener("pointermove",e=>{
  const b=noBtn.getBoundingClientRect();
  const z=zone.getBoundingClientRect();
  const dist=Math.hypot((b.left+b.width/2)-e.clientX,(b.top+b.height/2)-e.clientY);
  if(dist<60){
    noBtn.style.left=Math.random()*(z.width-b.width)+"px";
    noBtn.style.top=Math.random()*(z.height-b.height)+"px";
  }
});

noBtn.addEventListener("click",e=>e.preventDefault());

yesBtn.addEventListener("click",()=>{
  dialog.classList.add("party");
  zone.style.display="none";
  question.style.display="none";
  fineprint.style.display="none";
  result.style.display="block";
  fireConfetti();
});
</script>

</body>
</html>
